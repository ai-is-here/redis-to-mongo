# Redis to MongoDB Synchronization Engine

This project provides a synchronization engine for transferring data from Redis to MongoDB. It is specifically designed to manage streams and sets with a particular naming convention.

This readme was generated by GPT :D

## Installation

To install the necessary dependencies, run the following command:

```
pip install
```

## Usage

To run the synchronization engine, execute the `run.py` script:

```
python run.py
```

## Components

### Config Loader (`config_loader.py`)

The `Config` class in `config_loader.py` loads the configuration from environment variables and a `config.json` file. The configuration includes MongoDB and Redis connection details, synchronization interval, and the number of messages per stream.

### Sync Engine (`sync_engine.py`)

The `SyncEngine` class in `sync_engine.py` is responsible for synchronizing data between Redis and MongoDB. It uses the `RedisHandler` to interact with Redis and the `MongoHandler` to interact with MongoDB.

The `SyncEngine` class has several key methods:

- `init_streams()`: Initializes the streams dictionary with all existing streams in MongoDB.
- `sync_keys_structure()`: Synchronizes the structure of keys between Redis and MongoDB.
- `sync()`: Synchronizes data between Redis and MongoDB.
- `send_stream_messages_to_mongo(stream_name: str, messages: dict)`: Sends stream messages from Redis to MongoDB.
- `update_sets_in_mongo(sets: list[str])`: Updates sets in MongoDB with data from Redis.
- `run()`: Runs the SyncEngine indefinitely, synchronizing data between Redis and MongoDB.

### Run Script (`run.py`)

The `run.py` script initializes the `Config` and `SyncEngine` classes and starts the synchronization engine.

## Configuration

The configuration can be set using environment variables or a `config.json` file. The following configuration options are available:

- `MONGO_DB_NAME`: The name of the MongoDB database.
- `MONGO_USERNAME`: The username for the MongoDB database.
- `MONGO_PASSWORD`: The password for the MongoDB database.
- `MONGO_HOST`: The host of the MongoDB database.
- `REDIS_HOST`: The host of the Redis server.
- `REDIS_PORT`: The port of the Redis server.
- `SYNC_INTERVAL_SEC`: The synchronization interval in seconds.
- `MESSAGES_PER_STREAM`: The number of messages per stream.

If a configuration option is not set as an environment variable, the value from the `config.json` file will be used.

## Dependencies

The project requires the following Python packages:

- `mongoengine`
- `redis`
